<div class="container">
  <div class="header-with-action">
    <h1>Controle de Dívidas (Debts)</h1>
  </div>

  <div class="search-box">
    <h3>Nova Dívida</h3>
    <%= form_with model: @new_debt, local: true do |f| %>
      <div class="form-row">
        <div class="form-group flex-2">
          <%= f.label :name, "Nome/Descrição" %>
          <%= f.text_field :name, placeholder: "Ex: Aluguel, Internet...", required: true, class: "input-field" %>
        </div>
        <div class="form-group flex-1">
          <%= f.label :value, "Valor (R$)" %>
          <%= f.number_field :value, step: 0.01, placeholder: "0,00", required: true, class: "input-field" %>
        </div>
        <div class="form-group flex-1">
          <%= f.label :date, "Data (Opcional)" %>
          <%= f.date_field :date, class: "input-field" %>
        </div>
        <div class="form-group action-group">
          <%= f.submit "Adicionar", class: "btn-primary" %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="card-list">
    <% if @debts.any? %>
      <table class="data-table">
        <thead>
          <tr>
            <th>Data</th>
            <th>Descrição</th>
            <th>Valor</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @debts.each do |debt| %>
            <tr>
              <td><%= debt.date&.strftime("%d/%m/%Y") || "-" %></td>
              <td class="bold"><%= debt.name %></td>
              <td class="amount neg"><%= number_to_currency(debt.value, unit: "R$ ", separator: ",", delimiter: ".") %></td>
              <td>
                <%= button_to "Remover", debt_path(debt), method: :delete, data: { confirm: "Tem certeza?" }, class: "btn-danger-sm" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <div class="empty-state">
        <p>Você ainda não adicionou nenhuma dívida manual.</p>
      </div>
    <% end %>
  </div>
</div>
